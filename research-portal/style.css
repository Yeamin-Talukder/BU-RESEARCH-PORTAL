:root {
    /* Color Palette */
    --classic-ink: #222222; /* Slightly softer black */
    --archival-bone: #F2F0E9; /* Darkened for less glare */
    --library-linen: #E8E5DD; /* Darkened linen */
    --vellum-gold: #B59461;
    --oxford-blue: #1B365D;
    --parchment-gray: #71717A;
    --white: #FAFAF9; /* Softened white */
    
    /* Fonts */
    --font-headline: 'Crimson Pro', serif;
    --font-body: 'EB Garamond', serif;
    --font-ui: 'Public Sans', sans-serif;
    
    /* Spacing & Borders */
    --radius-lg: 20px;
    --radius-md: 12px;
    --radius-sm: 8px;
    --shadow-soft: 0 4px 12px rgba(0, 0, 0, 0.05);
    --shadow-card: 0 2px 8px rgba(0, 0, 0, 0.04);
    
    /* Hardcoded Color Variables */
    --btn-gold: #C2A87D;
    --btn-bronze: #B0986B;
    --btn-dark-gold: #BCA478;
    
    /* Notification Variables */
    --notif-bg-unread: #F2F0E9; /* Matches new Archival Bone */
    --notif-bg-hover: #E8E5DD; /* Matches new Library Linen */
    --notif-icon-bg: #EAF4FC; /* Slightly softened blue */
    --notif-icon-info: #FEF7EC; /* Softened orange */
    --notif-icon-success: #EFF8F0; /* Softened green */
    
    /* Overlay Surface */
    --surface-muted: #EAE7DF; /* Darker than linen */
    
    /* Notification Icon Content Colors (Foreground) */
    --notif-fg-default: #1B365D; /* Oxford Blue */
    --notif-fg-info: #B06D1A; /* Darkened Orange/Bronze */
    --notif-fg-success: #14532D; /* Dark Green */
}

[data-theme="dark"] {
    --classic-ink: #EAEAEA;
    --archival-bone: #121212; /* Deep Black */
    --library-linen: #1E1E1E; /* Dark Gray Cards */
    --vellum-gold: #C6A87C; /* Muted Gold */
    --oxford-blue: #90CAF9; /* Light Blue for Text */
    --parchment-gray: #B0B0B0;
    --white: #1E1E1E; /* Dark Gray for Containers */
    
    /* Button Overrides for Dark Mode */
    --btn-gold: #8D7B5C; 
    --btn-bronze: #5C4F38;
    --btn-dark-gold: #706246;
    
    /* Notification Overrides */
    --notif-bg-unread: #252525;
    --notif-bg-hover: #2F2F2F;
    --notif-icon-bg: #0D47A1;
    --notif-icon-info: #E65100;
    --notif-icon-success: #1B5E20;
    
    --surface-muted: #2A2A2A;
    
    --shadow-soft: 0 4px 12px rgba(0, 0, 0, 0.4);
    --shadow-card: 0 2px 8px rgba(0, 0, 0, 0.3);
    
    /* Notification Icon Content Colors (Foreground) - Dark Mode */
    --notif-fg-default: #FFFFFF;
    --notif-fg-info: #FFFFFF;
    --notif-fg-success: #FFFFFF;
}

* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

/* Smooth Theme Transitions for key elements */
body, 
.main-header, 
.sidebar-left, 
.sidebar-right, 
.main-feed, 
.paper-card, 
.journal-card, 
.filter-input, 
.filter-select, 
.btn, 
.icon-btn,
.user-btn,
.view-btn {
    transition: background-color 0.3s cubic-bezier(0.4, 0, 0.2, 1), 
                color 0.3s cubic-bezier(0.4, 0, 0.2, 1), 
                border-color 0.3s cubic-bezier(0.4, 0, 0.2, 1), 
                box-shadow 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

::selection {
    background-color: var(--vellum-gold);
    color: var(--white);
}

body {
    background-color: var(--archival-bone);
    color: var(--classic-ink);
    font-family: var(--font-body);
    font-size: 16px;
    line-height: 1.5;
    height: 100vh;
    display: flex;
    flex-direction: column;
    overflow: hidden; /* Main scroll handled inside containers */
}

/* HEADER */
.main-header {
    background-color: var(--library-linen);
    padding: 1rem 2rem;
    display: flex;
    justify-content: space-between;
    align-items: center;
    box-shadow: 0 1px 4px rgba(0,0,0,0.05);
    z-index: 10;
    border-bottom: 3px solid var(--archival-bone); /* Creates that layered paper look */
}

.logo-area h1 {
    font-family: var(--font-headline);
    font-size: 1.8rem;
    color: var(--vellum-gold);
    line-height: 1;
    font-weight: 600;
}

.logo-area h2 {
    font-family: var(--font-headline);
    font-size: 1.2rem;
    color: var(--oxford-blue);
    font-weight: 400;
}

.main-nav {
    display: flex;
    gap: 3rem;
}

.nav-link {
    font-family: var(--font-headline);
    text-decoration: none;
    color: var(--oxford-blue);
    font-weight: 700;
    font-size: 1.1rem;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    position: relative;
    padding-bottom: 5px;
}

/* Sliding Underline Animation */
.nav-link::after {
    content: '';
    position: absolute;
    width: 0;
    height: 2px;
    bottom: 0;
    left: 0;
    background-color: var(--oxford-blue);
    transition: width 0.3s ease;
}

.nav-link:hover::after {
    width: 100%;
}

.nav-link.active::after {
    width: 100%;
}

.user-actions {
    display: flex;
    align-items: center;
    gap: 1rem;
}

.icon-btn {
    background: none;
    border: none;
    cursor: pointer;
    font-size: 1.5rem;
    color: var(--oxford-blue);
    transition: transform 0.2s ease, color 0.2s ease;
}

.icon-btn:hover {
    transform: scale(1.1);
    color: var(--vellum-gold);
}

.user-btn {
    width: 40px;
    height: 40px;
    border: 1px solid var(--oxford-blue);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.3s ease;
}

.user-btn:hover, .user-btn.active {
    background-color: var(--oxford-blue);
    color: var(--white);
    box-shadow: 0 4px 10px rgba(27, 54, 93, 0.3);
}

/* MAIN LAYOUT */
.layout-container {
    display: flex;
    flex: 1;
    gap: 1.5rem;
    padding: 1.5rem;
    height: calc(100vh - 80px); /* Adjust based on header height */
    overflow: hidden;
    max-width: 1600px;
    margin: 0 auto;
    width: 100%;
}

/* SIDEBARS & MAIN COMMON STYLES */
.sidebar-left, .sidebar-right, .main-feed {
    background-color: var(--white);
    border-radius: var(--radius-lg);
    padding: 1.5rem;
    box-shadow: var(--shadow-soft);
    overflow-y: auto;
    /* Custom Scrollbar for inner containers */
    scrollbar-width: thin;
    scrollbar-color: var(--vellum-gold) var(--library-linen);
}

/* FAB Toggle Button */
.fab-btn {
    position: fixed;
    bottom: 2rem;
    right: 2rem;
    width: 60px;
    height: 60px;
    border-radius: 50%;
    background-color: var(--vellum-gold);
    color: var(--white);
    border: none;
    box-shadow: 0 4px 15px rgba(181, 148, 97, 0.5);
    display: flex; /* Always visible initially */
    align-items: center;
    justify-content: center;
    font-size: 1.5rem;
    cursor: pointer;
    z-index: 100;
    transition: transform 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275), background-color 0.3s, right 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
}

.fab-btn:hover {
    transform: scale(1.1);
    background-color: #A08250; /* Darker gold */
}

.fab-btn.active {
    right: 350px; /* slide out with sidebar (320px + margin) */
    background-color: var(--white);
    color: var(--vellum-gold);
    border: 2px solid var(--vellum-gold);
}

/* Sidebar Toggle Logic */
.sidebar-right {
    position: fixed;
    right: 0;
    top: 80px; /* Below header */
    bottom: 0;
    width: 320px;
    background-color: var(--white);
    box-shadow: -5px 0 15px rgba(0,0,0,0.1);
    z-index: 50;
    transform: translateX(110%); /* Slide out to right */
    transition: transform 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
    display: block; /* Always block, just moved out */
    
    /* Keep the inner padding/gap improvements */
    padding: 2.5rem;
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
}

.sidebar-right.active {
    transform: translateX(0); /* Slide in */
    animation: none; /* Transition handles it */
}

@keyframes slideInRight {
    from { opacity: 0; transform: translateX(20px); }
    to { opacity: 1; transform: translateX(0); }
}

.sidebar-left {
    flex: 0 0 320px;
    display: flex;
    flex-direction: column;
    background-color: var(--archival-bone); /* To match image card-on-card look */
    overflow: hidden; /* Prevent sidebar itself from scrolling */
}

.main-feed {
    flex: 1;
    background-color: var(--archival-bone); /* Match sidebar background */
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
}

.sidebar-right {
    flex: 0 0 280px;
    background-color: var(--white);
    display: flex;
    flex-direction: column;
    gap: 1rem;
}

/* LEFT SIDEBAR COMPONENTS */
.sidebar-title {
    font-family: 'Courier Prime', monospace; /* "JOURNAL LIST" looks typewriter-ish in design */
    font-size: 1.2rem;
    color: var(--parchment-gray);
    text-align: center;
    margin-bottom: 1rem;
    font-weight: bold;
    letter-spacing: 1px;
    flex-shrink: 0; /* Keep title fixed */
}

.search-box {
    position: relative;
    margin-bottom: 1.5rem;
    flex-shrink: 0; /* Keep search fixed */
}

.search-box input {
    width: 100%;
    padding: 0.8rem 2.5rem 0.8rem 1rem;
    border-radius: var(--radius-md);
    border: none;
    background-color: var(--library-linen);
    font-family: var(--font-ui);
    color: var(--classic-ink);
}

.search-box i {
    position: absolute;
    right: 1rem;
    top: 50%;
    transform: translateY(-50%);
    color: var(--oxford-blue);
    font-size: 1.2rem;
}

.journal-list {
    display: flex;
    flex-direction: column;
    /* gap: 1rem; Removed to allow margin animation */
    overflow-y: auto; /* Scroll ONLY the list */
    padding-right: 5px; /* Space for scrollbar */
    flex: 1; /* Fill remaining space */
    scrollbar-width: thin;
    scrollbar-color: var(--vellum-gold) var(--library-linen);
}

/* Journal Card Styles */

.journal-card {
    background-color: var(--library-linen);
    padding: 1rem;
    border-radius: var(--radius-md);
    display: flex;
    gap: 1rem;
    align-items: center;
}

.journal-icon {
    width: 40px;
    height: 48px;
    background-color: var(--white); /* Fallback */
    background-image: url('assets/journal_covers.png');
    background-size: 300% 200%; /* 3 columns, 2 rows based on the generated grid */
    border-radius: 4px;
    flex-shrink: 0;
    box-shadow: 0 2px 4px rgba(0,0,0,0.1);
}

/* Sprite positioning assuming 3x2 grid */
.journal-card:nth-child(1) .journal-icon { background-position: 0 0; }        /* Science - top left */
.journal-card:nth-child(2) .journal-icon { background-position: 50% 0; }      /* IEEE - top center */
.journal-card:nth-child(3) .journal-icon { background-position: 100% 0; }     /* Nature - top right */
.journal-card:nth-child(4) .journal-icon { background-position: 0 100%; }     /* Medical - bottom left */
.journal-card:nth-child(5) .journal-icon { background-position: 50% 100%; }   /* Agri - bottle center */
.journal-card:nth-child(6) .journal-icon { background-position: 100% 100%; }  /* Social - bottom right */

.journal-info h4 {
    font-family: var(--font-headline);
    color: var(--oxford-blue);
    font-size: 1rem;
    margin-bottom: 0.2rem;
}

.journal-info p {
    font-family: var(--font-body);
    font-size: 0.8rem;
    color: var(--classic-ink); 
    line-height: 1.2;
}

/* MAIN FEED COMPONENTS */
.paper-card {
    background-color: var(--library-linen);
    padding: 2rem;
    border-radius: var(--radius-lg);
    position: relative;
}

/* Removed .paper-views - Replaced by .paper-meta */
.paper-title {
    font-family: var(--font-headline);
    font-size: 1.4rem;
    color: var(--oxford-blue);
    margin-bottom: 1rem;
    margin-top: 0.5rem;
    padding-right: 3rem; /* Space for views */
}

.paper-authors {
    display: flex;
    flex-wrap: wrap;
    gap: 1.5rem;
    margin-bottom: 1.5rem;
}

.author {
    font-family: var(--font-ui);
    font-size: 0.9rem;
    color: var(--classic-ink);
    display: flex;
    align-items: center;
    gap: 0.5rem;
}

.paper-actions {
    display: flex;
    gap: 1rem;
}

.btn {
    padding: 0.6rem 1.2rem;
    border-radius: 50px; /* Pill shape */
    border: none;
    font-family: var(--font-ui);
    font-weight: 500;
    cursor: pointer;
    display: flex;
    align-items: center;
    gap: 0.5rem;
    transition: transform 0.1s;
}

.btn:active {
    transform: scale(0.98);
}

.btn-primary {
    background-color: #C1A67B; /* Mixing gold/bone for that beige button look */
    color: var(--white);
}

.btn-secondary {
    background-color: var(--btn-bronze); /* Slightly darker gold/bronze */
    color: var(--white);
}

/* Specific button colors from image analysis */
.view-abstract-btn {
    background-color: var(--btn-gold); 
    color: #fff;
}
.view-abstract-btn:hover {
     background-color: var(--vellum-gold); 
}
.paper-actions .btn:nth-child(2) {
    background-color: var(--btn-dark-gold); 
}

/* RIGHT SIDEBAR COMPONENTS */
.sidebar-right {
    padding: 2.5rem; /* Increased padding */
    display: flex;
    flex-direction: column;
    gap: 1.5rem; /* Consistent gap between groups */
}

.filter-group {
    margin-bottom: 0.5rem; /* Additional subtle spacing */
}

.filter-label {
    display: block;
    margin-bottom: 0.5rem;
    font-family: var(--font-ui);
    font-weight: 600;
    color: var(--classic-ink);
    font-size: 0.9rem;
}

.filter-input {
    width: 100%;
    padding: 1.2rem; /* Larger padding for inputs */
    border-radius: var(--radius-md);
    border: 1px solid transparent; /* Prepare for focus state */
    background-color: var(--library-linen);
    font-family: var(--font-body);
    font-size: 1rem;
    color: var(--classic-ink); /* Darker text */
    outline: none;
    transition: all 0.2s;
}

.filter-input:focus {
    background-color: var(--white);
    border-color: var(--vellum-gold);
    box-shadow: 0 0 0 3px rgba(181, 148, 97, 0.1);
}

.filter-input::placeholder {
    color: rgba(113, 113, 122, 0.6);
}

.dropdown-group {
    position: relative;
}

.filter-select {
    width: 100%;
    padding: 1.2rem;
    border-radius: var(--radius-md);
    border: 1px solid transparent;
    background-color: var(--library-linen);
    font-family: var(--font-body);
    color: var(--classic-ink);
    appearance: none;
    cursor: pointer;
    font-size: 1rem;
    transition: all 0.2s;
    /* Custom arrow indicator could be added here ideally */
}

.filter-select:focus {
    border-color: var(--vellum-gold);
    background-color: var(--white);
}

.view-options-group {
    margin-top: 1rem;
}

.view-options {
    display: flex;
    gap: 1rem;
    justify-content: space-between;
    margin-top: 0.5rem;
}

.view-btn {
    flex: 1;
    background-color: var(--library-linen);
    border: none;
    padding: 0.8rem;
    border-radius: 50px;
    font-family: var(--font-ui);
    color: var(--oxford-blue);
    font-size: 0.85rem;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 0.4rem;
}

.filter-action {
    margin-top: auto;
    display: flex;
    justify-content: center;
}

.btn-filter {
    background-color: #B59461; /* Vellum Gold */
    color: white;
    width: 100%;
    padding: 0.8rem;
    border-radius: 50px;
    border: none;
    font-family: var(--font-headline); /* Looks serif-y in design */
    font-size: 1.2rem;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 0.5rem;
    box-shadow: 0 4px 10px rgba(181, 148, 97, 0.4);
}

/* MODAL */
.modal {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(26, 26, 26, 0.4); /* Slightly simplified opacity */
    backdrop-filter: blur(5px); /* Modern blur effect */
    display: flex;
    justify-content: center;
    align-items: center;
    z-index: 1000;
    opacity: 0;
    pointer-events: none;
    transition: opacity 0.4s cubic-bezier(0.16, 1, 0.3, 1); /* Smooth elegant easing */
}

.modal.active {
    opacity: 1;
    pointer-events: auto;
}

.modal-content {
    background-color: var(--surface-muted); /* Muted overlay background */
    padding: 2.5rem;
    border-radius: var(--radius-lg);
    width: 90%;
    max-width: 600px;
    box-shadow: 0 20px 50px rgba(0,0,0,0.15); 
    position: relative;
    border: 1px solid var(--vellum-gold);
    
    /* Initial state for entering */
    transform: scale(0.95) translateY(20px);
    opacity: 0;
    transition: transform 0.4s cubic-bezier(0.16, 1, 0.3, 1), opacity 0.4s ease;
}

.modal.active .modal-content {
    transform: scale(1) translateY(0);
    opacity: 1;
}

.close-modal {
    position: absolute;
    top: 1rem;
    right: 1.5rem;
    font-size: 2rem;
    cursor: pointer;
    color: var(--oxford-blue);
    line-height: 0.8;
}

#modal-title {
    font-family: var(--font-headline);
    color: var(--oxford-blue);
    margin-bottom: 1rem;
}

#modal-text {
    font-family: var(--font-body);
    font-size: 1.1rem;
    color: var(--classic-ink);
}

.hidden {
    display: none; /* Helpers if needed */
}

/* RESPONSIVE */
@media (max-width: 1024px) {
    .sidebar-left, .sidebar-right {
        display: none; /* For simplicity based on Plan, purely mobile stacking could be better but sticking to task scope */
    }
    .main-feed {
        flex: 1;
    }
}
@media (max-width: 768px) {
    .main-header {
        flex-direction: column;
        gap: 1rem;
        text-align: center;
    }
    .main-nav {
        gap: 1rem;
        flex-wrap: wrap;
        justify-content: center;
    }
}
/* ANIMATIONS & INTERACTIONS */

/* Jelly/Jiggle Entrance Animation - Softened */
@keyframes jellyUp {
    0% {
        opacity: 0;
        transform: translateY(60px) scale(0.95, 1.05); /* Less travel, less stretch */
    }
    50% {
        opacity: 1;
        transform: translateY(-10px) scale(1.02, 0.98); /* Smaller overshoot */
    }
    70% {
        transform: translateY(5px) scale(0.98, 1.02); /* Gentle bounce */
    }
    100% {
        transform: translateY(0) scale(1, 1);
        opacity: 1;
    }
}

/* Live Search Animation */
.journal-card.filtered-out {
    opacity: 0 !important;
    transform: scale(0.8);
    max-height: 0;
    margin-bottom: 0; /* Collapse margin */
    padding: 0;
    border: none;
    pointer-events: none;
    overflow: hidden;
}

/* Apply Animation to Journal Cards - Consolidated */
.journal-card {
    opacity: 0; /* Star invisible for entrance */
    animation: jellyUp 1s cubic-bezier(0.28, 0.84, 0.42, 1) forwards;
    
    transform-origin: center;
    max-height: 100px; /* Arbitrary large height for collapse animation */
    margin-bottom: 1rem; 
    
    /* Comprehensive Transition */
    transition: 
        transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1), 
        box-shadow 0.3s ease, 
        background-color 0.2s, 
        border-color 0.2s,
        opacity 0.3s ease,
        max-height 0.5s ease-in-out, /* Smooth collapse */
        margin-bottom 0.5s ease-in-out,
        padding 0.5s ease-in-out;
        
    cursor: pointer;
    position: relative;
    border: 1px solid transparent; 
}

/* Stagger delays for journals */
.journal-card:nth-child(1) { animation-delay: 0.3s; }
.journal-card:nth-child(2) { animation-delay: 0.4s; }
.journal-card:nth-child(3) { animation-delay: 0.5s; }
.journal-card:nth-child(4) { animation-delay: 0.6s; }
.journal-card:nth-child(5) { animation-delay: 0.7s; }
.journal-card:nth-child(6) { animation-delay: 0.8s; }

.journal-card:hover {
    background-color: var(--white);
    /* Pop out and slide right with bounce */
    transform: scale(1.05) translateX(8px);
    box-shadow: -5px 10px 25px rgba(0, 0, 0, 0.1);
    border-color: rgba(181, 148, 97, 0.3); /* Subtle gold border */
    z-index: 10;
}

/* Animate the icon inside */
.journal-card:hover .journal-icon {
    transform: rotate(-5deg) scale(1.1);
    transition: transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
}

.journal-icon {
    transition: transform 0.3s ease;
}

.journal-tag {
    display: none; /* Replaced by watermark */
}

/* Apply Animation to Paper Cards */
/* Apply Animation to Paper Cards */
.paper-card {
    /* Layout & Box Model */
    position: relative;
    background-color: var(--library-linen); /* Changed from white to match journal card */
    border-radius: var(--radius-md);
    padding: 2rem;
    margin-bottom: 0; /* Let grid gap handle spacing */
    box-shadow: var(--shadow-card);
    border: 1px solid transparent;
    transition: 
        transform 0.3s ease, 
        box-shadow 0.3s ease,
        opacity 0.4s ease,
        max-height 0.4s ease,
        margin-bottom 0.4s ease,
        padding 0.4s ease;
    
    /* Allow shadows to bloom */
    overflow: visible; 
    
    /* Initial Animation State (if not using animate-in immediately) */
    opacity: 1; 
    transform: translateY(0);
    max-height: 5000px; /* Limit for animation */
    
    display: flex;
    flex-direction: column;
    justify-content: space-between; 
}

/* Watermark Typography */
/* Watermark Typography -> Converted to Small Corner Tag */
.paper-card::before {
    content: attr(data-journal);
    position: absolute;
    top: 0;
    left: 0;
    
    /* Layout */
    display: inline-block;
    width: auto;
    height: auto;
    padding: 0.4rem 1rem;
    
    /* Style */
    background-color: var(--oxford-blue); /* Updated to Blue as requested */
    color: var(--white);
    font-family: var(--font-ui);
    font-size: 0.75rem;
    font-weight: 700;
    letter-spacing: 0.5px;
    text-transform: uppercase;
    
    /* Shaping */
    border-radius: var(--radius-md) 0 var(--radius-md) 0;
    z-index: 2;
    
    /* Reset previous watermark styles */
    opacity: 1;
    white-space: nowrap;
    line-height: normal;
    margin: 0;
    pointer-events: none;
}

/* Ensure content sits close to standard flow */
.paper-meta, .paper-title, .paper-authors, .paper-actions {
    position: relative;
    z-index: 1;
}

/* Ensure content sits above watermark */
.paper-meta, .paper-title, .paper-authors, .paper-actions {
    position: relative;
    z-index: 1;
}

/* Base state for animation entry */
.paper-card.animate-in {
    /* Removed explicit opacity: 0 to avoid permanent invisibility if animation fails */
    animation: jellyUp 0.8s ease-out both; 
    /* Do NOT set max-height here so it uses the base rule */
}

/* Hidden state for filtering */
.paper-card.filtered-hidden {
    opacity: 0 !important;
    transform: scale(0.95);
    max-height: 0 !important;
    margin-bottom: 0 !important;
    padding-top: 0 !important;
    padding-bottom: 0 !important;
    border: none;
    pointer-events: none;
    overflow: hidden !important; /* Only clip when hiding */
}

/* Scroll Animation Helper */
.scroll-hidden {
    opacity: 0;
    transform: translateY(30px);
    transition: all 0.6s ease-out;
}

.scroll-visible {
    opacity: 1;
    transform: translateY(0);
}

/* Stagger delays for papers - make them "collide" or come slightly after journals */
.paper-card:nth-child(1) { animation-delay: 0.4s; }
.paper-card:nth-child(2) { animation-delay: 0.6s; }
.paper-card:nth-child(3) { animation-delay: 0.8s; }
.paper-card:nth-child(4) { animation-delay: 1.0s; }

.paper-card:hover {
    transform: translateY(-4px);
    box-shadow: 0 8px 24px rgba(0, 0, 0, 0.08);
}

/* Paper Card Meta */
/* Paper Card Meta */
/* Paper Card Meta */
.paper-meta {
    position: absolute;
    top: 1.5rem;
    right: 1.5rem;
    display: flex;
    align-items: center;
    gap: 1rem;
}

.journal-tag {
    /* Style for tag inside paper-actions */
    background-color: var(--vellum-gold);
    color: var(--white);
    padding: 0.4rem 0.8rem; /* larger padding for action area */
    border-radius: var(--radius-sm);
    font-size: 0.8rem;
    font-family: var(--font-ui);
    font-weight: 600;
    text-transform: uppercase;
    margin-left: auto; /* Push to the right if in flex container */
    margin-bottom: 0; /* Align with buttons */
}

.meta-stat {
    font-family: var(--font-ui);
    font-size: 0.85rem;
    color: var(--classic-ink);
    display: flex;
    align-items: center;
    gap: 0.3rem;
}

/* Button Animations & Active States */
.btn {
    position: relative;
    overflow: hidden;
}

/* ... btn::after ... */

.view-btn, .icon-btn {
    transition: all 0.2s;
}

.view-btn.active {
    background-color: var(--oxford-blue);
    color: var(--white);
    border-color: var(--oxford-blue);
}

.view-options-group {
    display: flex; 
    flex-direction: column; 
    gap: 0.5rem;
}

.filter-label {
    font-family: var(--font-ui);
    font-size: 0.8rem;
    color: var(--parchment-gray);
    font-weight: 600;
}

/* PROFILE DROPDOWN */
.profile-container {
    position: relative;
}

.profile-dropdown {
    position: absolute;
    top: 120%; /* Below button */
    right: 0;
    width: 280px;
    background-color: var(--surface-muted); /* Muted overlay background */
    border-radius: var(--radius-md);
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
    border: 1px solid var(--library-linen);
    z-index: 100;
    opacity: 0;
    visibility: hidden;
    transform: translateY(-10px);
    transition: all 0.3s ease;
    overflow: hidden;
}

.profile-dropdown.active {
    opacity: 1;
    visibility: visible;
    transform: translateY(0);
}

.dropdown-header {
    padding: 1.5rem;
    display: flex;
    flex-direction: column;
    align-items: center;
    background-color: var(--archival-bone);
    border-bottom: 1px solid var(--library-linen);
}

.user-avatar-large {
    width: 60px;
    height: 60px;
    background-color: var(--white);
    border: 2px solid var(--vellum-gold);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 2rem;
    color: var(--oxford-blue);
    margin-bottom: 0.8rem;
}

.user-details {
    text-align: center;
}

.user-name {
    display: block;
    font-family: var(--font-headline);
    font-weight: 600;
    font-size: 1.1rem;
    color: var(--oxford-blue);
}

.user-email {
    display: block;
    font-family: var(--font-ui);
    font-size: 0.8rem;
    color: var(--parchment-gray);
    margin-top: 0.2rem;
}

.dropdown-menu {
    list-style: none;
    padding: 0.5rem;
}

.dropdown-item {
    display: flex;
    align-items: center;
    gap: 0.8rem;
    padding: 0.8rem 1rem;
    text-decoration: none;
    color: var(--classic-ink);
    font-family: var(--font-ui);
    font-weight: 500;
    font-size: 0.9rem;
    border-radius: var(--radius-sm);
    transition: background-color 0.2s;
}

.dropdown-item:hover {
    background-color: var(--library-linen);
}

.dropdown-item i {
    font-size: 1.1rem;
    color: var(--oxford-blue);
}

.text-danger {
    color: #D32F2F;
}

.text-danger:hover {
    background-color: #FDEDEC;
}

.text-danger i {
    color: #D32F2F;
}

/* NOTIFICATION PANEL */
.notification-container {
    position: relative;
}

.notification-badge {
    position: absolute;
    top: -2px;
    right: -2px;
    background-color: #D32F2F;
    color: white;
    font-size: 0.7rem;
    font-weight: bold;
    width: 18px;
    height: 18px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-family: var(--font-ui);
    border: 2px solid var(--library-linen);
}

.notification-panel {
    position: absolute;
    top: 120%;
    right: -80px; /* Shifted left slightly */
    width: 320px;
    background-color: var(--surface-muted); /* Muted overlay background */
    border-radius: var(--radius-md);
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
    border: 1px solid var(--library-linen);
    z-index: 100;
    opacity: 0;
    visibility: hidden;
    transform: translateY(-10px);
    transition: all 0.3s ease;
    display: flex;
    flex-direction: column;
}

.notification-panel.active {
    opacity: 1;
    visibility: visible;
    transform: translateY(0);
}

.notification-header {
    padding: 1rem;
    border-bottom: 1px solid var(--library-linen);
    display: flex;
    justify-content: space-between;
    align-items: center;
    background-color: var(--archival-bone);
    border-radius: var(--radius-md) var(--radius-md) 0 0;
}

.notification-header h3 {
    font-family: var(--font-headline);
    font-size: 1rem;
    color: var(--oxford-blue);
    margin: 0;
}

.mark-read {
    font-size: 0.75rem;
    color: var(--vellum-gold);
    text-decoration: none;
    font-weight: 600;
}

.notification-list {
    list-style: none;
    max-height: 300px;
    overflow-y: auto;
    
    /* Custom Scrollbar */
    scrollbar-width: thin;
    scrollbar-color: var(--vellum-gold) var(--surface-muted);
}

.notification-list::-webkit-scrollbar {
    width: 6px;
}

.notification-list::-webkit-scrollbar-track {
    background: var(--surface-muted);
    border-radius: var(--radius-sm);
}

.notification-list::-webkit-scrollbar-thumb {
    background-color: var(--vellum-gold);
    border-radius: var(--radius-sm);
}

/* Custom Scrollbar for Notification Modal */
.modal-body-scroll {
    scrollbar-width: thin;
    scrollbar-color: var(--vellum-gold) var(--surface-muted);
}

.modal-body-scroll::-webkit-scrollbar {
    width: 8px;
}

.modal-body-scroll::-webkit-scrollbar-track {
    background: var(--surface-muted);
    border-radius: var(--radius-sm);
}

.modal-body-scroll::-webkit-scrollbar-thumb {
    background-color: var(--vellum-gold);
    border-radius: var(--radius-sm);
    border: 2px solid var(--surface-muted); /* Padding effect */
}

.notification-item {
    display: flex;
    gap: 1rem;
    padding: 1rem;
    border-bottom: 1px solid var(--library-linen);
    transition: background-color 0.2s;
    cursor: pointer;
}

.notification-item:last-child {
    border-bottom: none;
}

.notification-item:hover {
    background-color: var(--library-linen);
}

.notification-item.unread {
    background-color: var(--notif-bg-unread); /* Archival Bone tint */
}

.notification-item.unread:hover {
    background-color: var(--notif-bg-hover);
}

.notif-icon {
    width: 36px;
    height: 36px;
    background-color: var(--notif-icon-bg); /* Light blue */
    color: var(--notif-fg-default); /* Fixed contrast */
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
}

.notif-icon.info { background-color: var(--notif-icon-info); color: var(--notif-fg-info); }
.notif-icon.success { background-color: var(--notif-icon-success); color: var(--notif-fg-success); }

.notif-content {
    flex: 1;
}

.notif-text {
    font-size: 0.85rem;
    color: var(--classic-ink);
    margin-bottom: 0.3rem;
    line-height: 1.3;
}

.notif-time {
    font-size: 0.75rem;
    color: var(--parchment-gray);
}

.notification-footer {
    padding: 0.8rem;
    text-align: center;
    border-top: 1px solid var(--library-linen);
    background-color: var(--archival-bone);
    border-radius: 0 0 var(--radius-md) var(--radius-md);
}

.notification-footer a {
    font-size: 0.85rem;
    color: var(--oxford-blue);
    text-decoration: none;
    font-weight: 600;
}


/* Animation Keyframes */
@keyframes jellyUp {
    0% {
        opacity: 0;
        transform: scale(0.95) translateY(10px);
    }
    100% {
        opacity: 1;
        transform: scale(1) translateY(0);
    }
}

/* =========================================
   LOGIN PAGE STYLES
   ========================================= */

.login-container {
    display: flex;
    height: 100vh;
    width: 100%;
    overflow: hidden;
    background-color: var(--white);
}

/* Left Side: Brand */
.login-brand-side {
    flex: 1; /* Takes up 50% */
    background-color: var(--oxford-blue);
    position: relative;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    color: var(--white);
    padding: 2rem;
    overflow: hidden;
}

/* Subtle pattern overlay */
.brand-overlay {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-image: radial-gradient(circle at 20% 80%, rgba(181, 148, 97, 0.2) 0%, transparent 40%),
                      radial-gradient(circle at 80% 20%, rgba(255, 255, 255, 0.1) 0%, transparent 40%);
    opacity: 0.6;
    pointer-events: none;
}

.brand-content {
    position: relative; /* Above overlay */
    z-index: 2;
    text-align: center;
    max-width: 400px;
}

.brand-logo {
    font-size: 5rem;
    color: var(--vellum-gold);
    margin-bottom: 2rem;
    filter: drop-shadow(0 4px 10px rgba(0,0,0,0.2));
}

.login-brand-side h1 {
    font-family: var(--font-headline);
    font-size: 2.5rem;
    margin-bottom: 0.5rem;
    line-height: 1.1;
}

.login-brand-side h2 {
    font-family: var(--font-headline);
    font-size: 1.5rem;
    font-weight: 400;
    color: var(--vellum-gold);
    margin-bottom: 3rem;
}

.brand-quote {
    font-family: var(--font-body);
    font-size: 1.2rem;
    font-style: italic;
    color: rgba(255, 255, 255, 0.8);
    position: relative;
    line-height: 1.6;
}

.brand-quote::before {
    content: '';
    display: block;
    width: 60px;
    height: 2px;
    background-color: var(--vellum-gold);
    margin: 0 auto 1.5rem;
}

/* Right Side: Form */
.login-form-side {
    flex: 0 0 50%;
    max-width: 600px;
    background-color: var(--archival-bone);
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 2rem;
}

.form-wrapper {
    width: 100%;
    max-width: 420px;
    padding: 3rem;
    background-color: var(--white);
    border-radius: var(--radius-lg);
    box-shadow: 0 20px 40px rgba(0, 0, 0, 0.06);
    border: 1px solid var(--library-linen);
    animation: slideInRight 0.6s cubic-bezier(0.2, 0.8, 0.2, 1);
}

.form-header {
    text-align: center;
    margin-bottom: 2.5rem;
}

.form-header h3 {
    font-family: var(--font-headline);
    font-size: 2rem;
    color: var(--oxford-blue);
    margin-bottom: 0.5rem;
}

.form-header p {
    font-family: var(--font-body);
    font-size: 1.1rem;
    color: var(--parchment-gray);
}

/* Form Elements */
.input-group {
    margin-bottom: 1.5rem;
}

.input-group label {
    display: block;
    font-family: var(--font-ui);
    font-size: 0.9rem;
    font-weight: 600;
    color: var(--classic-ink);
    margin-bottom: 0.5rem;
}

.input-wrapper {
    position: relative;
}

.input-wrapper i.ph, .input-wrapper i.ph-fill {
    position: absolute;
    left: 1rem;
    top: 50%;
    transform: translateY(-50%);
    color: var(--parchment-gray);
    font-size: 1.2rem;
    transition: color 0.3s;
}

.input-wrapper input {
    width: 100%;
    padding: 1rem 1rem 1rem 2.8rem; /* Space for icon */
    border-radius: var(--radius-md);
    border: 1px solid var(--library-linen);
    background-color: var(--white);
    font-family: var(--font-body);
    font-size: 1rem;
    color: var(--classic-ink);
    transition: all 0.2s ease;
}

.input-wrapper input:focus {
    border-color: var(--vellum-gold);
    outline: none;
    box-shadow: 0 0 0 3px rgba(181, 148, 97, 0.1);
}

.input-wrapper select {
    width: 100%;
    padding: 1rem 1rem 1rem 2.8rem; /* Space for icon */
    border-radius: var(--radius-md);
    border: 1px solid var(--library-linen);
    background-color: var(--white);
    font-family: var(--font-body);
    font-size: 1rem;
    color: var(--classic-ink);
    transition: all 0.2s ease;
    appearance: none;
    cursor: pointer;
}

.input-wrapper select:focus {
    border-color: var(--vellum-gold);
    outline: none;
    box-shadow: 0 0 0 3px rgba(181, 148, 97, 0.1);
}

.input-wrapper input:focus + i,
.input-wrapper select:focus + i {
    color: var(--vellum-gold); 
}
/* Fix for icon color on focus using sibling selector requires input to be before icon or using :focus-within on wrapper */
.input-wrapper:focus-within i.ph {
    color: var(--oxford-blue);
}

.toggle-password {
    position: absolute;
    right: 1rem;
    top: 50%;
    transform: translateY(-50%);
    background: none;
    border: none;
    cursor: pointer;
    color: var(--parchment-gray);
    padding: 0;
}

.toggle-password:hover {
    color: var(--oxford-blue);
}

.form-actions {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 2rem;
}

/* Custom Checkbox */
.checkbox-container {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    font-family: var(--font-ui);
    font-size: 0.9rem;
    color: var(--classic-ink);
    cursor: pointer;
    position: relative;
    padding-left: 26px;
    user-select: none;
}

.checkbox-container input {
    position: absolute;
    opacity: 0;
    cursor: pointer;
    height: 0;
    width: 0;
}

.checkmark {
    position: absolute;
    left: 0;
    top: 0;
    height: 20px;
    width: 20px;
    background-color: var(--library-linen);
    border-radius: 4px;
    transition: all 0.2s;
}

.checkbox-container:hover input ~ .checkmark {
    background-color: #dcd9d0;
}

.checkbox-container input:checked ~ .checkmark {
    background-color: var(--oxford-blue);
}

.checkmark:after {
    content: "";
    position: absolute;
    display: none;
}

.checkbox-container input:checked ~ .checkmark:after {
    display: block;
}

.checkbox-container .checkmark:after {
    left: 7px;
    top: 3px;
    width: 5px;
    height: 10px;
    border: solid white;
    border-width: 0 2px 2px 0;
    transform: rotate(45deg);
}

.forgot-password {
    font-family: var(--font-ui);
    font-size: 0.9rem;
    color: var(--oxford-blue);
    text-decoration: none;
    font-weight: 600;
    transition: color 0.2s;
}

.forgot-password:hover {
    color: var(--vellum-gold);
}

.btn-login {
    width: 100%;
    padding: 1rem;
    background-color: var(--oxford-blue);
    color: var(--white);
    border: none;
    border-radius: var(--radius-md);
    font-family: var(--font-ui);
    font-size: 1.1rem;
    font-weight: 600;
    cursor: pointer;
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 0.5rem;
    transition: all 0.2s ease;
    box-shadow: 0 4px 15px rgba(27, 54, 93, 0.2);
}

.btn-login:hover {
    background-color: #2c4a75;
    transform: translateY(-2px);
    box-shadow: 0 6px 20px rgba(27, 54, 93, 0.3);
}

.form-footer {
    text-align: center;
    margin-top: 2rem;
    font-family: var(--font-ui);
    font-size: 0.9rem;
    color: var(--classic-ink);
}

.form-footer a {
    color: var(--oxford-blue);
    font-weight: 600;
    text-decoration: none;
}

.form-footer a:hover {
    text-decoration: underline;
}

/* Mobile Responsive */
@media (max-width: 900px) {
    .login-container {
        flex-direction: column;
        height: auto;
        min-height: 100vh;
    }
    
    .login-brand-side {
        padding: 3rem 1.5rem;
        flex: 0 0 auto;
    }
    
    .login-brand-side h1 {
        font-size: 2rem;
    }
    
    .login-form-side {
        flex: 1;
        padding: 2rem 1.5rem;
        max-width: 100%;
    }
    
    .form-wrapper {
        padding: 2rem;
        box-shadow: none;
        border: none;
        background: transparent;
    }
}
